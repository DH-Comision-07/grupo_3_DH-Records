<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head-1.ejs') %> 
    <link rel="stylesheet" href="/css/usersEdit.css">
    <%- include('../partials/head-2.ejs') %>
</head>

<body>  
    <%- include('../partials/header.ejs') %>  
    <div class="contenedor-general--edit ">  
        <main >
            <section class="formulario">
                <form action="/users/<%= user.id %>?_method=PUT" method="POST" enctype="multipart/form-data" >

                    <h1 class="formulario__titulo">Edit Profile</h1>

                    <div class="formulario__field">
                        <label for="title" class="formulario__label">Name:</label>
                        <input  type="text" name="nombreUsuario" id="nombreUsuario" placeholder="Username" class="formulario__input"  value="<%= user.nombreUsuario %>" required>
                    </div>

                    <div class="formulario__field">
                        <label for="title" class="formulario__label">Last Name:</label>
                        <input  type="text" name="apellidoUsuario" id="apellidoUsuario" placeholder="Last Name" class="formulario__input"  value="<%= user.apellidoUsuario %>" required>
                    </div>

                    <div class="formulario__field">
                        <label for="awards" class="formulario__label">Email:</label>
                        <input type="email" name="email" id="email" placeholder="Email address" class="formulario__input" value="<%= user.email %>" required>
                    </div>

                    <div class="formulario__field">
                        <label for="awards" class="formulario__label">Password:</label>
                        <input type="password" name="contraseña" id="contraseña" placeholder="Password" class="formulario__input" value="<%= user.contraseña %>" required>
                    </div>

                    <div class="formulario__field">
                        <label for="title" class="formulario__label">DNI:</label>
                        <input  type="text" name="dni" id="dni" class="formulario__input"  value="<%= user.dni %>" >
                    </div>

                    <div class="formulario__field">
                        <label for="title" class="formulario__label">Address:</label>
                        <input  type="text" name="direccion" id="direccion" class="formulario__input"  value="<%= user.direccion%>" >
                    </div>

                    <% if(locals.userLogged.categorias_id == 1) { %> 
                    <div class="formulario__field">
                        <label for="categorias_id" class="formulario__label">Category:</label>
                        <select name="categorias_id" id="categorias_id" class="formulario__input" required>
                            <% categoriasUsuario.forEach(function(categoria) { %>
                                <option value="<%= categoria.id %>" <%= categoria.id === user.categorias_id ? 'selected' : '' %>>
                                    <%= categoria.categorias %>
                                </option>
                            <% }); %>
                        </select>
                    </div>
                    <% } %>

                   
                        <input class='formulario__input' type='file' id ='profilePicture' name='profilePicture' accept='image/*'>  
                       
                 

                    <div class="formulario__field--contenedor-btn">
                        <button type="submit" class="formulario__button">Save Changes</button>
                    </div>
                
                </form>

                <% if(locals.userLogged.categorias_id == 1) { %> 
                <form action="/users/<%= user.id %>?_method=DELETE" method="POST" >
                    <div class="formulario__field--contenedor-btn">
                        <button type="submit" class="formulario__button">Delete Account</button>
                    </div>
                </form>
                <% } %>
                
            </section>
        </main>
    <!--   <%- include('../partials/footer.ejs') %>  -->
    </div>
</body>
</html>
